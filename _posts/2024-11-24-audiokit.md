---
layout: post
title: "Audio Kit 라이브러리를 이용한 기타 음 식별 앱 만들기"
date: 2024-11-24
tags: [iOS, Swift, Flutter, AudioKit, FFT]
read_time: 15
subtitle: "기타 음성을 오디오 데이터로 변환하고, FFT(고속 퓨리에 변환) 알고리즘을 구현하여 음 식별 기능을 구현해봅니다"
---

## 개요
기타 연주는 제 오랜 취미입니다. 시간이 나면 늘 연습을 하고, 유튜브 알고리즘은 관련 영상으로 도배되어 있으며, 악기를 살 돈도 없지만 한 달에 한 번은 괜히 낙원상가에 가보곤 합니다.

프로그래밍 역시 제 오랜 취미이자 삶의 일부입니다. 직업으로 삼을 정도니까요. 그렇다보니 문득 기타와 프로그래밍, 제 흥미를 양분하는 이 두 가지 분야를 연결하는 프로젝트를 진행해보면 어떨까 하는 아이디어가 떠올랐습니다.

프로젝트는 지금 이 순간에도 진행 중입니다. 앱의 자세한 기획과 아이디어를 전부 공유하기엔 조금 이르지만, 개발을 진행하는 중간 중간 제가 배우고 느낀 점들을 공유하고자 합니다.

이 포스트는 그 첫 번째 단계로, 기타 음성을 오디오 데이터로 변환하고 식별하는 기능을 구현하는 과정을 다룹니다.


## AudioKit 이란?

[AudioKit GitHub 레포지토리](https://github.com/AudioKit/AudioKit)

[AudioKit 쿡북 앱 GitHub 레포지토리](https://github.com/AudioKit/Cookbook)

AudioKit은 Swift로 작성된 오디오 라이브러리입니다. AudioKit은 실시간 신호 처리, 음향 효과 적용, 오디오 분석 등을 지원하여 복잡한 오디오 작업을 손쉽게 구현할 수 있습니다.

제가 기획한 앱 역시 구현을 위해 오디오 데이터를 다루는 과정이 필수적이었습니다.

저는 앱의 성능과 크로스 플랫폼 개발의 이점을 얻기 위해 Swift로 오디오 처리 및 식별 등의 고급 기능을 구현하고, Flutter로 앱의 UI 영역과 기본적인 기능을 연결하는 구조를 계획했습니다. 

이중 애플 네이티브 생태계에서 오디오 처리 기능을 구현하기 위해 AudioKit을 선택하게 되었습니다.


<figure>
  <img src="/assets/images/post-241124-01.png" alt="AudioKit CookBook App 스크린샷" class="screenshot">
  <figcaption>AudioKit CookBook App 스크린샷</figcaption>
</figure>


AudioKit은 오픈소스 라이브러리입니다.

위 스크린샷은 AudioKit 팀에서 제공하는 쿡북 앱으로, 다양한 예제와 샘플 코드를 통해 AudioKit의 기능을 학습할 수 있는 데모 앱입니다.

소스코드 역시 공개되어 있으며, 저는 이 쿡북 앱의 Tuner 모듈을 참고하여 기타 음성을 오디오 데이터로 변환하고 식별하는 기능을 구현하였습니다.


## 결국 음악 이론은 필요해
당장에 제가 구현한 기타 음 식별 기능을 소개해드리고 싶지만, 안타깝게도 그 전에 넘어야 할 지루한 과정이 있습니다.

기타의 음성을 녹음하여 오디오 데이터로 전환하고, 이것을 우리에게 익숙한 음이름 체계로 변환하는 과정은 약간의 음악 이론 지식이 필요합니다.

기타의 소리는 무엇으로 이루어져 있는지, 주파수는 무엇이고, 또 어떻게 변화하는지, 그리고 이것을 식별하여 우리에게 익숙한 음이름으로 변환할 수 있는 방법은 어떤 건지... 등은 알아야 위의 기능을 구현할 수 있으니까요.

### 주파수가 뭔가요?
주파수. 음악 이론에 관심이 없는 사람들도 들어본 적이 있을 만큼 익숙한 단어지만, 정작 주파수가 정확히 무엇인지 설명할 수 있는 사람은 많지 않습니다. 저조차도 그랬습니다.

<figure>
  <img src="/assets/images/post-241124-02.png" alt="소리와 주파수" class="screenshot">
  <figcaption>소리와 주파수</figcaption>
</figure>


모든 소리는 파동입니다. 파동은 보통 공기와 같은 매질을 통해 전달되며, 이 파동의 **진동수(Hz, 헤르츠; 초당 진동 수)**를 **주파수**라고 합니다.

파동의 진동수는 소리의 **높낮이**를, 파동의 **진폭**은 소리의 **크기(dB, 데시벨)**를 결정합니다. 소리의 높낮이는 주파수에 따라 결정되며, 주파수가 높을수록 음이 높아지고, 주파수가 낮을수록 음이 낮아집니다.

당연하지만 기타의 현을 튕길 때도 파동이 일어납니다. 이 현의 진동수를 통해 주파수를 결정할 수 있습니다.

현의 두께, 장력, 길이 등이 진동수에 영향을 미치며, 프렛을 눌러 현의 길이를 조절함으로써 다양한 음정을 만들어냅니다. 우리가 AudioKit을 사용하여 분석해야 할 것이 바로 이것입니다.


## 파동에서 데이터로, 데이터에서 음 이름으로
무엇이 필요한지 알았으니, 이제 만들어볼 차례입니다.




